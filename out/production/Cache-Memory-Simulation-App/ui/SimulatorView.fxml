<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Pagination?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<?import javafx.scene.control.TextField?>
<BorderPane prefHeight="720" prefWidth="1120" stylesheets="@style.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="ui.SimulatorController">

    <top>
        <VBox spacing="10" styleClass="top-bar">
            <padding>
                <Insets bottom="14" left="14" right="14" top="14"/>
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label fx:id="titleLabel" styleClass="header-title" text="Simulation"/>
                <Region HBox.hgrow="ALWAYS"/>

                <Label text="Address:" styleClass="hint"/>
                <TextField fx:id="addressBinField" promptText="binary" prefWidth="200"/>

                <Label text="Hex:" styleClass="hint"/>
                <TextField fx:id="addressHexField" editable="false" focusTraversable="false" prefWidth="80"/>

                <Button text="Random" onAction="#onRandomAddress" styleClass="btn-secondary"/>
                <Button text="Go" onAction="#onGoAddress" styleClass="btn-primary"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Button onAction="#onBack" styleClass="btn-secondary" text="Back"/>
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="12">

                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="Tag:" styleClass="hint"/>
                    <TextField fx:id="tagField" prefWidth="100" editable="false"/>

                    <Label text="Index:" styleClass="hint"/>
                    <TextField fx:id="indexField" prefWidth="90" editable="false"/>

                    <Label text="Off:" styleClass="hint"/>
                    <TextField fx:id="offsetField" prefWidth="70" editable="false"/>

                </HBox>


                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Label text="Data (hex):" styleClass="hint"/>
                    <TextField fx:id="dataHexField" prefWidth="60" promptText="AF"/>

                </HBox>


                <HBox alignment="CENTER_LEFT" spacing="12">
                    <Button text="Read" onAction="#onRead" styleClass="btn-primary"/>
                    <Button text="Write" onAction="#onWrite" styleClass="btn-primary"/>
                    <Label fx:id="statusLabel" text="â€”" styleClass="status-chip"/>

                </HBox>

                <Region HBox.hgrow="ALWAYS"/>

            </HBox>

        </VBox>
    </top>


    <center>
        <SplitPane dividerPositions="0.5">
            <VBox spacing="10" styleClass="card">
                <padding>
                    <Insets bottom="14" left="14" right="14" top="14" />
                </padding>
                <Label styleClass="section-title" text="Cache memory" />
                <TableView fx:id="cacheTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="cIndex" prefWidth="70" text="Index" />
                        <TableColumn fx:id="cValid" prefWidth="40" text="V" />
                        <TableColumn fx:id="cTag" prefWidth="120" text="Tag" />
                        <TableColumn fx:id="cB0" prefWidth="70" text="B0" />
                        <TableColumn fx:id="cB1" prefWidth="70" text="B1" />
                        <TableColumn fx:id="cB2" prefWidth="70" text="B2" />
                        <TableColumn fx:id="cB3" prefWidth="70" text="B3" />
                    </columns>
                </TableView>
            </VBox>

            <VBox spacing="10" styleClass="card">
                <padding>
                    <Insets bottom="14" left="14" right="14" top="14" />
                </padding>
                <Label styleClass="section-title" text="Main memory (4B blocks)" />
                <TableView fx:id="memTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="mAddr" prefWidth="110" text="Block addr" />
                        <TableColumn fx:id="mB0" prefWidth="70" text="B0" />
                        <TableColumn fx:id="mB1" prefWidth="70" text="B1" />
                        <TableColumn fx:id="mB2" prefWidth="70" text="B2" />
                        <TableColumn fx:id="mB3" prefWidth="70" text="B3" />
                    </columns>
                </TableView>
                <Pagination fx:id="memPagination" />
            </VBox>
        </SplitPane>
    </center>
</BorderPane>
